<html xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:pef="http://www.daisy.org/ns/2008/pef" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:obfl="http://www.daisy.org/ns/2011/obfl">
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Dotify Formatter Tests</title>
<style type="text/css">
					div.volume, div.section {
						border-left-style: solid;
						border-color: #ddd;
						border-width: 1px;
						margin: 1em 1em;
					}
					div.page {
						margin: 1em 1em;
						border-style: solid;
						border-width: 1px;
						background-color: #fefefe;
					}
					div.label {
						font-family: sans-serif;
						text-color: green;
					}
					span.element {
						padding-right: 1em;
					}
					body {
						font-family: sans-serif;
						margin: 2em 2em;
					}
					h1 {
						margin-top: 2em;
					}
					a.internal {
						color: white;
						text-decoration: none;
					}
					a.internal:hover {
						color: grey;
					}
					.example {
					    padding: .5em;
    					border-left-width: .5em;
    					border-left-style: solid;
 						border-color: #e0cb52;
  						background-color: #fcfaee;
					}
				</style>
</head>
<body>
<p>Updated: 2016-02-26T15:46Z</p>
<h1 id="border-center-input.obfl">Border center test<a href="#border-center-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-center-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border center test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="center"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-center-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests margins with multiple borders. This test verifies that margins that are separated by borders aren't collapsed.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠖⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠲&lt;/row&gt;
          &lt;row&gt;⠇⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠓⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠚&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="border-inner-input.obfl">Border inner test<a href="#border-inner-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-inner-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border inner test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="inner"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-inner-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Border inner test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠄&lt;/row&gt;
          &lt;row&gt;⠸⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠇&lt;/row&gt;
          &lt;row&gt;⠈⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="border-outer-input.obfl">Border outer test<a href="#border-outer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests border alignment.</p>
<h2>border-outer-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Border outer test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="40" page-height="29" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;block border-style="solid" border-width="1" border-align="outer"&gt;⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>border-outer-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-10&lt;/dc:date&gt;
      &lt;dc:title&gt;Border outer test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests border alignment.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="29" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠇⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="field-style-input.obfl">Field text style test<a href="#field-style-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that text styles can be used with fields.</p>
<h2>field-style-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Field text style test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that text styles can be used with fields.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field text-style="strong"&gt;
          &lt;string value="page "/&gt;
          &lt;current-page text-style="em"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>field-style-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-12&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠨⠨⠏⠁⠛⠑⠀⠠⠄⠼⠁⠱&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="hyphenate-input.obfl">Hyphenation test<a href="#hyphenate-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the hyphenation property works.</p>
<h2>hyphenate-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Hyphenation test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the hyphenation property works.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="8" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body" hyphenate="true"&gt;
    &lt;block&gt;hyphenation&lt;/block&gt;
    &lt;block hyphenate="false"&gt;hyphenation
			
      &lt;block hyphenate=""&gt;hyphenation&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>hyphenate-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-16&lt;/dc:date&gt;
      &lt;dc:title&gt;Hyphenation test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the hyphenation property works.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="8" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠤&lt;/row&gt;
          &lt;row&gt;⠞⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠞&lt;/row&gt;
          &lt;row&gt;⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;⠓⠽⠏⠓⠑⠝⠁⠤&lt;/row&gt;
          &lt;row&gt;⠞⠊⠕⠝&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="keep-input.obfl">Keep test<a href="#keep-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the keep property</p>
<h2>keep-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Keep test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the keep property&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ &lt;/block&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤&lt;/block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>keep-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-input.obfl">Single leader test<a href="#leader-right-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a single right aligned leader with two items after (space and page number)</p>
<h2>leader-right-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Single leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a single right aligned leader with two items after (space and page number)&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_1" style="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-multiple-input.obfl">Multiple leaders test<a href="#leader-right-multiple-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests multiple right aligned leaders on the same row</p>
<h2>leader-right-multiple-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multiple leaders test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests multiple right aligned leaders on the same row&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="30%" align="right"/&gt;1
      &lt;leader pattern="⠄" position="60%" align="right"/&gt;2
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;3
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-multiple-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠼⠁⠄⠼⠃⠄⠄⠼⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="leader-right-simple-input.obfl">Simple leader test<a href="#leader-right-simple-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a single right aligned leader with a only one item after</p>
<h2>leader-right-simple-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Simple leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a single right aligned leader with a only one item after&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;
      &lt;page-number ref-id="chapter_1" style="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>leader-right-simple-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-05-09&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠄⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-input.obfl">Collapsing margins test<a href="#margin-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that margins collapse properly.</p>
<h2>margin-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Collapsing margins test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that margins collapse properly.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="3" margin-bottom="2"&gt;
      &lt;block margin-top="2" margin-bottom="3"&gt;⠤⠤&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="2" margin-bottom="2"&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-nested-input.obfl">Nested borders margin test<a href="#margin-nested-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests margins with multiple borders. This test verifies that margins that are separated by
		borders aren't collapsed.</p>
<h2>margin-nested-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests margins with multiple borders. This test verifies that margins that are separated by
		borders aren't collapsed.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="18" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2"&gt;
      &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" margin-top="1" margin-bottom="1"&gt;
        &lt;block margin-left="1" margin-right="1" margin-top="1" margin-bottom="1"&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-nested-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="18" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠏⠉⠉⠉⠉⠉⠉⠹⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠤⠤⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠧⠤⠤⠤⠤⠤⠤⠼⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin-nested2-input.obfl">Nested borders margin test<a href="#margin-nested2-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests margins with multiple borders.</p>
<h2>margin-nested2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders margin test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests margins with multiple borders.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block align="center" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1" margin-left="1" margin-right="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block align="center" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner" break-before="page"&gt;
      &lt;block align="center" margin-top="1" margin-bottom="1"&gt;
        &lt;block align="center" margin-left="2" margin-right="2" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
          &lt;block align="center" margin-top="1" margin-bottom="1" margin-left="1" margin-right="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
        &lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin-nested2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="margin2-input.obfl">
<a href="#margin2-input.obfl" class="internal"> &para;</a>
</h1>
<p></p>
<h2>margin2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-bottom="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
    &lt;block margin-top="1"&gt;⠿⠿⠿⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>margin2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier/&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-indicator-input.obfl">Margin region indicators test<a href="#marker-indicator-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that margin region indicators work.</p>
<h2>marker-indicator-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Margin region indicators test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that margin region indicators work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="6" duplex="false" inner-margin="2" outer-margin="2"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="pages" indicator="⠿"/&gt;
          &lt;marker-indicator markers="sections" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
      &lt;margin-region align="right" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="pages sections" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="sections" value="1"/&gt;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;
      &lt;marker class="pages" value="1"/&gt;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤&shy;⠤
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-indicator-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-12-08&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠿⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠿⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-page-input.obfl">Marker reference page search test<a href="#marker-ref-page-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a page.</p>
<h2>marker-ref-page-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference page search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="page"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="page"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-page-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-sheet-input.obfl">Marker reference sheet search test<a href="#marker-ref-sheet-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a sheet. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-sheet-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference sheet search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a sheet. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="sheet"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="sheet" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="sheet" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="sheet"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-sheet-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-spread-input.obfl">Marker reference spread search test<a href="#marker-ref-spread-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a spread. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-spread-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference spread search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a spread. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-spread-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
      &lt;dc:title&gt;Marker reference search test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker references within a page.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-spread-sequence-input.obfl">Marker reference spread search test<a href="#marker-ref-spread-sequence-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a spread, but across different sequences. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-spread-sequence-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference spread search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a spread, but across different sequences. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="main"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-spread-sequence-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-21&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="marker-ref-spread-volume-input.obfl">Marker reference spread search test<a href="#marker-ref-spread-volume-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker references within a spread limited to volume boundaries. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.</p>
<h2>marker-ref-spread-volume-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Marker reference spread search test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker references within a spread limited to volume boundaries. Note that fields are different on left/right hand sides
		due to the fact that the scope does not effect the starting point of the search. The starting point is always the
		current page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="6" inner-margin="0" outer-margin="0" row-spacing="1" duplex="true"&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="1"&gt;
    &lt;pre-content/&gt;
    &lt;post-content/&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="main" initial-page-number="1"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="1"/&gt;⠤⠤
      &lt;marker class="pagenum" value="2"/&gt;⠤⠤
      &lt;marker class="pagenum" value="3"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="4"/&gt;⠤⠤
      &lt;marker class="pagenum" value="5"/&gt;⠤⠤
      &lt;marker class="pagenum" value="6"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="main"&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="7"/&gt;⠤⠤
      &lt;marker class="pagenum" value="8"/&gt;⠤⠤
      &lt;marker class="pagenum" value="9"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤
      &lt;marker class="pagenum" value="10"/&gt;⠤⠤
      &lt;marker class="pagenum" value="11"/&gt;⠤⠤
      &lt;marker class="pagenum" value="12"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>marker-ref-spread-volume-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-12-16&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠚⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="multi-line-footer-input.obfl">Multi line footer test<a href="#multi-line-footer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that multiple footers work.</p>
<h2>multi-line-footer-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multi line footer test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that multiple footers work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>multi-line-footer-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="multi-line-header-input.obfl">Multi line header test<a href="#multi-line-header-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that multiple headers work.</p>
<h2>multi-line-header-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Multi line header test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that multiple headers work.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>multi-line-header-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-07&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="orphans-input.obfl">Orphans test<a href="#orphans-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the orphans property works as expected.</p>
<h2>orphans-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Orphans test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the orphans property works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="4"&gt;⠤⠤&lt;/block&gt;
    &lt;block orphans="1"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-top="4"&gt;⠤⠤&lt;/block&gt;
    &lt;block orphans="2"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>orphans-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-06&lt;/dc:date&gt;
      &lt;dc:title&gt;Orphans test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the orphans property works as expected.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-input.obfl">Padding test<a href="#padding-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the padding property</p>
<h2>padding-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Padding test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the padding property&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠤⠤⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-nested-input.obfl">Nested borders padding test<a href="#padding-nested-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests padding with multiple borders</p>
<h2>padding-nested-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Nested borders padding test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests padding with multiple borders&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="18" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block border-style="solid" border-width="1" padding-left="1" padding-right="1" padding-top="1" padding-bottom="1"&gt;
        &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-nested-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="18" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠏⠉⠉⠉⠉⠉⠉⠹⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠤⠤⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠤⠤⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠧⠤⠤⠤⠤⠤⠤⠼⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="padding-sides-only-input.obfl">Padding with borders on sides test<a href="#padding-sides-only-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests padding with borders only on the sides</p>
<h2>padding-sides-only-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Padding with borders on sides test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests padding with borders only on the sides&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-left-style="solid" border-right-style="solid" border-width="1" margin-left="2" margin-right="2" padding-left="2" padding-right="2" padding-top="1" padding-bottom="1"&gt;
      &lt;block&gt;⠤​⠤​⠤​⠤​⠤​⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>padding-sides-only-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-07-06&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠤⠤⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠤⠤⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="row-spacing-input.obfl">Row spacing test<a href="#row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests collapsing margins of blocks with different row spacing.</p>
<h2>row-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="sv"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Row spacing test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests collapsing margins of blocks with different row spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
    &lt;block margin-top="1"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>row-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-09-22&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="translate-input.obfl">Translation test<a href="#translate-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the translate property works. Note that this test uses an
		implementation specific translation mode, which isn't in the OBFL-specification. Also,
		because of this the generated PEF-file is invalid, but it proves that the translator 
		property works.</p>
<h2>translate-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Translation test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the translate property works. Note that this test uses an
		implementation specific translation mode, which isn't in the OBFL-specification. Also,
		because of this the generated PEF-file is invalid, but it proves that the translator 
		property works.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;Translation&lt;/block&gt;
    &lt;block translate="bypass"&gt;no translation&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>translate-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-28&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠞⠗⠁⠝⠎⠇⠁⠞⠊⠕⠝&lt;/row&gt;
          &lt;row&gt;no translation&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-before-input.obfl">Vertical position test: Before alignment<a href="#vertical-position-before-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property with "before" alignment and both padding, margin and border.</p>
<h2>vertical-position-before-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Before alignment&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property with "before" alignment and both padding, margin and border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="100%" vertical-align="before" padding-top="1" padding-bottom="1" margin-top="1" margin-bottom="1" border-top-style="solid" border-bottom-style="solid"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-before-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-borders-input.obfl">Vertical position test: Top border<a href="#vertical-position-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property with a top border.</p>
<h2>vertical-position-borders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Top border&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property with a top border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="3" padding-top="1" vertical-align="after" border-top-style="solid"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-borders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-dls-input.obfl">Vertical position test: Double line spacing<a href="#vertical-position-dls-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property together with double line spacing.</p>
<h2>vertical-position-dls-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test: Double line spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property together with double line spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="10" duplex="false" row-spacing="2.0"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="2" vertical-align="after"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-dls-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="10" rowgap="4" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row rowgap="0"&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="vertical-position-input.obfl">Vertical position test<a href="#vertical-position-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests the vertical position property.</p>
<h2>vertical-position-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Vertical position test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests the vertical position property.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block vertical-position="3" vertical-align="after"&gt;⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>vertical-position-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-08-20&lt;/dc:date&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="widows-input.obfl">Widows test<a href="#widows-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the widows property works as expected.</p>
<h2>widows-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Widows test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the widows property works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
    &lt;block widows="1"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤&lt;/block&gt;
    &lt;block widows="2"&gt;⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤ ⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>widows-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
      &lt;dc:date&gt;2015-10-06&lt;/dc:date&gt;
      &lt;dc:title&gt;Widows test&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that the widows property works as expected.&lt;/dc:description&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠀⠤⠤⠀⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="xml-data-input.obfl">XML Data 1<a href="#xml-data-input.obfl" class="internal"> &para;</a>
</h1>
<p>[add description]</p>
<h2>xml-data-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;XML Data 1&lt;/dc:title&gt;
    &lt;dc:description&gt;[add description]&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;xml-processor name="identity-processor"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:output method="xml" version="1.0" encoding="UTF-8" indent="no"/&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xsl:copy-of select="*"/&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;renderer name="identity-renderer"&gt;
    &lt;rendering-scenario qualifier="count(/obfl:block)=1" processor="identity-processor" cost="(+ (- 30 $min-block-width) $total-height)"/&gt;
  &lt;/renderer&gt;
  &lt;sequence master="body"&gt;
    &lt;xml-data renderer="identity-renderer"&gt;
      &lt;block margin-bottom="1"&gt;
        &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿&lt;/block&gt;
      &lt;/block&gt;
    &lt;/xml-data&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>xml-data-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="xml-data2-input.obfl">XML Data 2<a href="#xml-data2-input.obfl" class="internal"> &para;</a>
</h1>
<p>[add description]</p>
<h2>xml-data2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;XML Data 2&lt;/dc:title&gt;
    &lt;dc:description&gt;[add description]&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;xml-processor name="matrix"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xml-processor-result&gt;
          &lt;block margin-bottom="1"&gt;Matrix table: 
            &lt;xsl:value-of select="count(/obfl:table/obfl:tr[1]/obfl:td)"/&gt;x
            &lt;xsl:value-of select="count(/obfl:table/obfl:tr)"/&gt;
          &lt;/block&gt;
          &lt;xsl:copy-of select="*"/&gt;
        &lt;/xml-processor-result&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;xml-processor name="staircase"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="obfl:table"&gt;
        &lt;block&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:tr"&gt;
        &lt;xsl:apply-templates select="obfl:td[1]"/&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:td"&gt;
        &lt;block margin-left="2"&gt;
          &lt;xsl:value-of select="text()"/&gt;
          &lt;xsl:apply-templates select="following-sibling::*[1]"/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;renderer name="table-renderer"&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="matrix" cost="(+ 1 $total-height)"/&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="staircase" cost="(+ 0 $total-height)"/&gt;
  &lt;/renderer&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;Table 1&lt;/block&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;3&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;6&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;9&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
    &lt;block&gt;Table 2&lt;/block&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
    &lt;block&gt;End&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>xml-data2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠞⠁⠃⠇⠑⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠠⠍⠁⠞⠗⠊⠭&lt;/row&gt;
          &lt;row&gt;⠞⠁⠃⠇⠑⠒⠼⠉⠭⠼⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠠⠞⠁⠃⠇⠑⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠠⠑⠝⠙&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="xml-data3-input.obfl">XML Data 3<a href="#xml-data3-input.obfl" class="internal"> &para;</a>
</h1>
<p>[add description]</p>
<h2>xml-data3-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;XML Data 3&lt;/dc:title&gt;
    &lt;dc:description&gt;[add description]&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;xml-processor name="matrix"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xml-processor-result&gt;
          &lt;block margin-bottom="1"&gt;Matrix table: 
            &lt;xsl:value-of select="count(/obfl:table/obfl:tr[1]/obfl:td)"/&gt;x
            &lt;xsl:value-of select="count(/obfl:table/obfl:tr)"/&gt;
          &lt;/block&gt;
          &lt;xsl:copy-of select="*"/&gt;
        &lt;/xml-processor-result&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;xml-processor name="staircase"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="obfl:table"&gt;
        &lt;block&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:tr"&gt;
        &lt;xsl:apply-templates select="obfl:td[1]"/&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:td"&gt;
        &lt;block margin-left="2"&gt;
          &lt;xsl:value-of select="text()"/&gt;
          &lt;xsl:apply-templates select="following-sibling::*[1]"/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;xml-processor name="invalid"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xml-processor-result&gt;
          &lt;block&gt;Invalid&lt;/block&gt;
        &lt;/xml-processor-result&gt;
        &lt;xml-processor-result&gt;
          &lt;block&gt;Invalid&lt;/block&gt;
        &lt;/xml-processor-result&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;renderer name="table-renderer"&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="matrix" cost="(+ 1 $total-height)"/&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="staircase" cost="(+ 0 $total-height)"/&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="invalid" cost="(+ 0 $total-height)"/&gt;
  &lt;/renderer&gt;
  &lt;sequence master="body"&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;3&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;6&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;9&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
          &lt;td&gt;1234567&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>xml-data3-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠠⠍⠁⠞⠗⠊⠭&lt;/row&gt;
          &lt;row&gt;⠞⠁⠃⠇⠑⠒⠼⠉⠭⠼⠉&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠼⠁⠃⠉⠙⠑⠋⠛&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="xml-data4-input.obfl">XML Data minimum block size<a href="#xml-data4-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the correct scenario is selected when the min-block-size variable
		is used to determine the cost. The first scenario would be selected if the cost were
		the same in both cases.</p>
<h2>xml-data4-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;XML Data minimum block size&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the correct scenario is selected when the min-block-size variable
		is used to determine the cost. The first scenario would be selected if the cost were
		the same in both cases.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="9" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;xml-processor name="p1"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="obfl:table"&gt;
        &lt;block&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:tr"&gt;
        &lt;xsl:apply-templates select="obfl:td[1]"/&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:td"&gt;
        &lt;block margin-left="2"&gt;
          &lt;xsl:value-of select="text()"/&gt;
          &lt;xsl:apply-templates select="following-sibling::*[1]"/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;xml-processor name="p2"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="obfl:table"&gt;
        &lt;block&gt;
          &lt;xsl:apply-templates/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:tr"&gt;
        &lt;xsl:apply-templates select="obfl:td[1]"/&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:td"&gt;
        &lt;block margin-left="1"&gt;
          &lt;xsl:value-of select="text()"/&gt;
          &lt;xsl:apply-templates select="following-sibling::*[1]"/&gt;
        &lt;/block&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;renderer name="table-renderer"&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="p1" cost="(- 14 $min-block-width)"/&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="p2" cost="(- 14 $min-block-width)"/&gt;
  &lt;/renderer&gt;
  &lt;sequence master="body"&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;3&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;6&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;7&lt;/td&gt;
          &lt;td&gt;8&lt;/td&gt;
          &lt;td&gt;9&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>xml-data4-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="9" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠀⠼⠛&lt;/row&gt;
          &lt;row&gt;⠀⠀⠼⠓&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="xml-data5-input.obfl">XML Data minimum block size with matrix table<a href="#xml-data5-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that the correct scenario is selected when the min-block-size variable
		is used to determine the cost in a matrix table. The first scenario would be selected if the
		cost were the same in both cases.</p>
<h2>xml-data5-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;XML Data minimum block size with matrix table&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that the correct scenario is selected when the min-block-size variable
		is used to determine the cost in a matrix table. The first scenario would be selected if the
		cost were the same in both cases.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="9" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;xml-processor name="copy"&gt;
    &lt;xsl:stylesheet version="2.0"&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xml-processor-result&gt;
          &lt;xsl:copy-of select="*"/&gt;
        &lt;/xml-processor-result&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;xml-processor name="reverse"&gt;
    &lt;xsl:stylesheet version="2.0" exclude-result-prefixes="obfl"&gt;
      &lt;xsl:template match="/"&gt;
        &lt;xml-processor-result&gt;
          &lt;xsl:apply-templates select="*"/&gt;
        &lt;/xml-processor-result&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:table"&gt;
        &lt;table&gt;
          &lt;xsl:apply-templates select="." mode="inner"/&gt;
        &lt;/table&gt;
      &lt;/xsl:template&gt;
      &lt;xsl:template match="obfl:table" mode="inner"&gt;
        &lt;xsl:param name="pos" select="1"/&gt;
        &lt;tr&gt;
          &lt;xsl:for-each select="obfl:tr"&gt;
            &lt;xsl:copy-of select="obfl:td[$pos]"/&gt;
          &lt;/xsl:for-each&gt;
        &lt;/tr&gt;
        &lt;xsl:if test="obfl:tr/obfl:td[$pos+1]"&gt;
          &lt;xsl:apply-templates select="." mode="inner"&gt;
            &lt;xsl:with-param name="pos" select="$pos+1"/&gt;
          &lt;/xsl:apply-templates&gt;
        &lt;/xsl:if&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  &lt;/xml-processor&gt;
  &lt;renderer name="table-renderer"&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="copy" cost="(- 14 $min-block-width)"/&gt;
    &lt;rendering-scenario qualifier="count(/obfl:table)=1" processor="reverse" cost="(- 14 $min-block-width)"/&gt;
  &lt;/renderer&gt;
  &lt;sequence master="body"&gt;
    &lt;xml-data renderer="table-renderer"&gt;
      &lt;table&gt;
        &lt;tr&gt;
          &lt;td&gt;1&lt;/td&gt;
          &lt;td&gt;2&lt;/td&gt;
          &lt;td&gt;3&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
          &lt;td&gt;4&lt;/td&gt;
          &lt;td&gt;5&lt;/td&gt;
          &lt;td&gt;6&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/table&gt;
    &lt;/xml-data&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>xml-data5-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="9" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠼⠃⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠼⠋&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/block-row-spacing-input.obfl">block-row-spacing<a href="#dp2/block-row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests row-spacing on blocks.</p>
<h2>dp2/block-row-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;block-row-spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests row-spacing on blocks.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠂⠂⠂⠂⠂
      &lt;br/&gt;
      &lt;br/&gt;
                ⠯⠗⠼⠜⠌⠄
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block row-spacing="2.0"&gt;⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/block-row-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;block-row-spacing&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests row-spacing on blocks.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠂⠂⠂⠂⠂&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠯⠗⠼⠜⠌⠄&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/border-align-center-input.obfl">border-align-center<a href="#dp2/border-align-center-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests top and bottom borders with align="center".</p>
<h2>dp2/border-align-center-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;border-align-center&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests top and bottom borders with align="center".&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="center" border-bottom-style="solid" border-bottom-align="center" align="center"&gt;⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/border-align-center-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;border-align-center&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests top and bottom borders with align="center".&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠖⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠲&lt;/row&gt;
          &lt;row&gt;⠇⠀⠀⠀⠀⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠀⠀⠀⠀⠸&lt;/row&gt;
          &lt;row&gt;⠓⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠚&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/collapsing-margins-adjacent-blocks-input.obfl">collapsing-margins-adjacent-blocks<a href="#dp2/collapsing-margins-adjacent-blocks-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests collapsing of margins of adjacent sibling blocks.</p>
<h2>dp2/collapsing-margins-adjacent-blocks-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;collapsing-margins-adjacent-blocks&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests collapsing of margins of adjacent sibling blocks.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="15" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-bottom="1"&gt;⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block margin-top="1"&gt;⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/collapsing-margins-adjacent-blocks-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;collapsing-margins-adjacent-blocks&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests collapsing of margins of adjacent sibling blocks.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="15" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/collapsing-margins-empty-block-input.obfl">collapsing-margins-empty-block<a href="#dp2/collapsing-margins-empty-block-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests collapsing of margins of three adjacent sibling blocks, the middle one being empty.</p>
<h2>dp2/collapsing-margins-empty-block-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;collapsing-margins-empty-block&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests collapsing of margins of three adjacent sibling blocks, the middle one being empty.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1"&gt;⠿ &lt;/block&gt;
    &lt;block margin-bottom="1"/&gt;
    &lt;block margin-top="1"&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/collapsing-margins-empty-block-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;collapsing-margins-empty-block&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests collapsing of margins of three adjacent sibling blocks, the middle one being empty.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/comment-in-white-space-input.obfl">comment-in-white-space<a href="#dp2/comment-in-white-space-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests presence of a comment surrounded by white space. Broken: white space is dropped.</p>
<h2>dp2/comment-in-white-space-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;comment-in-white-space&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests presence of a comment surrounded by white space. Broken: white space is dropped.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="1" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠁⠁⠁  ⠁⠁⠁
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/comment-in-white-space-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;comment-in-white-space&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests presence of a comment surrounded by white space. Broken: white space is dropped.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="1" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠀⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/current-page-various-number-formats-input.obfl">current-page-various-number-formats<a href="#dp2/current-page-various-number-formats-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests current-page with different number-formats.</p>
<h2>dp2/current-page-various-number-formats-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;current-page-various-number-formats&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests current-page with different number-formats.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="front" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠏"/&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="rear" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="lower-roman"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="front"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="rear" initial-page-number="1"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/current-page-various-number-formats-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;current-page-various-number-formats&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests current-page with different number-formats.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠏⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/current-page-various-positions-input.obfl">current-page-various-positions<a href="#dp2/current-page-various-positions-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests current-page with different layout-masters. Sequences with different layout-masters, that each place current-page in a different position (header, footer or nowhere), follow each other. Also tests resetting page number with initial-page-number. Broken: page numbering bug, possibly related to https://github.com/joeha480/dotify/issues/134.</p>
<h2>dp2/current-page-various-positions-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;current-page-various-positions&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests current-page with different layout-masters. Sequences with different layout-masters, that each place current-page in a different position (header, footer or nowhere), follow each other. Also tests resetting page number with initial-page-number. Broken: page numbering bug, possibly related to https://github.com/joeha480/dotify/issues/134.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="b" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="c" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="b"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a" initial-page-number="10"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
    &lt;block break-before="page"&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="c"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/current-page-various-positions-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;current-page-various-positions&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests current-page with different layout-masters. Sequences with different layout-masters, that each place current-page in a different position (header, footer or nowhere), follow each other. Also tests resetting page number with initial-page-number. Broken: page numbering bug, possibly related to https://github.com/joeha480/dotify/issues/134.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠑&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠚&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁⠃&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/empty-block-border-input.obfl">empty-block-border<a href="#dp2/empty-block-border-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests empty blocks with border.</p>
<h2>dp2/empty-block-border-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;empty-block-border&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests empty blocks with border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"/&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"/&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="outer"&gt;&nbsp; &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/empty-block-border-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;empty-block-border&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests empty blocks with border.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/empty-block-input.obfl">empty-block<a href="#dp2/empty-block-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests empty blocks.</p>
<h2>dp2/empty-block-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;empty-block&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests empty blocks.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block&gt;&nbsp;&lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
    &lt;block margin-bottom="1"/&gt;
    &lt;block&gt;⠿&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/empty-block-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;empty-block&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests empty blocks.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/empty-margin-region-input.obfl">empty-margin-region<a href="#dp2/empty-margin-region-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests empty left margin with margin-region.</p>
<h2>dp2/empty-margin-region-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;empty-margin-region&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests empty left margin with margin-region.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators/&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/empty-margin-region-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;empty-margin-region&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests empty left margin with margin-region.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/first-line-indent-input.obfl">first-line-indent<a href="#dp2/first-line-indent-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests first-line-indent.</p>
<h2>dp2/first-line-indent-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;first-line-indent&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests first-line-indent.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block first-line-indent="2"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/first-line-indent-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;first-line-indent&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests first-line-indent.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/footer-middle-field-centering-input.obfl">footer-middle-field-centering<a href="#dp2/footer-middle-field-centering-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests position of middle field in footer when left field is empty and right field is non-empty. The middle field is positioned slightly more towards the left.</p>
<h2>dp2/footer-middle-field-centering-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;footer-middle-field-centering&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests position of middle field in footer when left field is empty and right field is non-empty. The middle field is positioned slightly more towards the left.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠤⠤⠤⠤⠤⠤⠤⠤"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠿⠿⠿⠿"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/footer-middle-field-centering-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;footer-middle-field-centering&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests position of middle field in footer when left field is empty and right field is non-empty. The middle field is positioned slightly more towards the left.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/hanging-indentation-input.obfl">hanging-indentation<a href="#dp2/hanging-indentation-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests hanging indentation (text-indent &gt; first-line-indent).</p>
<h2>dp2/hanging-indentation-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;hanging-indentation&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests hanging indentation (text-indent &gt; first-line-indent).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block first-line-indent="2" text-indent="4"&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/hanging-indentation-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;hanging-indentation&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests hanging indentation (text-indent &gt; first-line-indent).&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/header-row-spacing-input.obfl">header-row-spacing<a href="#dp2/header-row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating empty two-line top page margin using row-spacing on header.</p>
<h2>dp2/header-row-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;header-row-spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating empty two-line top page margin using row-spacing on header.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="false" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field/&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header row-spacing="2.0"&gt;
        &lt;field/&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿
              &lt;/block&gt;
    &lt;block break-before="page"&gt;⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/header-row-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;header-row-spacing&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating empty two-line top page margin using row-spacing on header.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/header-vary-height-left-right-pages-input.obfl">header-vary-height-left-right-pages<a href="#dp2/header-vary-height-left-right-pages-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests different height of header on left and right pages.</p>
<h2>dp2/header-vary-height-left-right-pages-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;header-vary-height-left-right-pages&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests different height of header on left and right pages.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
    &lt;block break-before="page"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/header-vary-height-left-right-pages-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;header-vary-height-left-right-pages&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests different height of header on left and right pages.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/keep-all-input.obfl">keep-all<a href="#dp2/keep-all-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple keep="all".</p>
<h2>dp2/keep-all-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;keep-all&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple keep="all".&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/keep-all-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;keep-all&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple keep="all".&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/keep-content-with-border-input.obfl">keep-content-with-border<a href="#dp2/keep-content-with-border-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that pages are not broken between a border of a block and the content of that block. Tested with keep="all", orphans or widows on the block with the border. Also tested for two nested blocks with borders.</p>
<h2>dp2/keep-content-with-border-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;keep-content-with-border&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that pages are not broken between a border of a block and the content of that block. Tested with keep="all", orphans or widows on the block with the border. Also tested for two nested blocks with borders.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block border-top-style="solid"&gt;
      &lt;block border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                  ⠿⠿⠿⠿⠿⠿
                &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/keep-content-with-border-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;keep-content-with-border&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that pages are not broken between a border of a block and the content of that block. Tested with keep="all", orphans or widows on the block with the border. Also tested for two nested blocks with borders.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/keep-several-blocks-input.obfl">keep-several-blocks<a href="#dp2/keep-several-blocks-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests keeping several consecutive blocks together.</p>
<h2>dp2/keep-several-blocks-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;keep-several-blocks&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests keeping several consecutive blocks together.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all"&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/keep-several-blocks-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;keep-several-blocks&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests keeping several consecutive blocks together.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/keep-with-following-sibling-of-parent-input.obfl">keep-with-following-sibling-of-parent<a href="#dp2/keep-with-following-sibling-of-parent-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests keeping block with following sibling of parent block.</p>
<h2>dp2/keep-with-following-sibling-of-parent-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;keep-with-following-sibling-of-parent&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests keeping block with following sibling of parent block.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;
      &lt;block&gt;⠤⠤⠤&lt;/block&gt;
      &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤&lt;/block&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤&lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/keep-with-following-sibling-of-parent-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;keep-with-following-sibling-of-parent&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests keeping block with following sibling of parent block.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/keep-with-next-input.obfl">keep-with-next<a href="#dp2/keep-with-next-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple keep-with-next.</p>
<h2>dp2/keep-with-next-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;keep-with-next&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple keep-with-next.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="10" page-height="6" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block keep="all" keep-with-next="1"&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/keep-with-next-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;keep-with-next&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple keep-with-next.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="6" cols="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/layout-master-row-spacing-input.obfl">layout-master-row-spacing<a href="#dp2/layout-master-row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests row-spacing on layout-master.</p>
<h2>dp2/layout-master-row-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;layout-master-row-spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests row-spacing on layout-master.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25" row-spacing="2.0"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
      &lt;br/&gt;
                ⠤⠤⠤⠤
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/layout-master-row-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;layout-master-row-spacing&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests row-spacing on layout-master.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="4" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
          &lt;row rowgap="0"&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-indicator-input.obfl">marker-indicator<a href="#dp2/marker-indicator-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests margin-region with marker-indicator.</p>
<h2>dp2/marker-indicator-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-indicator&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests margin-region with marker-indicator.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
      &lt;margin-region align="left" width="2"&gt;
        &lt;indicators&gt;
          &lt;marker-indicator markers="indicator/pagenum" indicator="⠿"/&gt;
        &lt;/indicators&gt;
      &lt;/margin-region&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;marker class="indicator/pagenum" value="x"/&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                ⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
                
      &lt;marker class="indicator/pagenum" value="x"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-indicator-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-indicator&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests margin-region with marker-indicator.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠀⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-across-sequence-workaround-input.obfl">marker-reference-across-sequence-workaround<a href="#dp2/marker-reference-across-sequence-workaround-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker-reference with multiple sequences. Currently marker-reference doesn't search across sequences. As a workaround I repeat markers at the start of a new sequence when needed.</p>
<h2>dp2/marker-reference-across-sequence-workaround-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-across-sequence-workaround&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker-reference with multiple sequences. Currently marker-reference doesn't search across sequences. As a workaround I repeat markers at the start of a new sequence when needed.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/entry" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/entry" value="1"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠁⠁⠁⠁⠁
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-across-sequence-workaround-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-across-sequence-workaround&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker-reference with multiple sequences. Currently marker-reference doesn't search across sequences. As a workaround I repeat markers at the start of a new sequence when needed.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-page-content-forward-backward-input.obfl">marker-reference-page-content-forward-backward<a href="#dp2/marker-reference-page-content-forward-backward-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker-reference with scope page-content. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).</p>
<h2>dp2/marker-reference-page-content-forward-backward-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-page-content-forward-backward&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker-reference with scope page-content. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="page-content"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-page-content-forward-backward-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-page-content-forward-backward&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker-reference with scope page-content. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-page-first-workaround-input.obfl">marker-reference-page-first-workaround<a href="#dp2/marker-reference-page-first-workaround-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests (hypothetical) marker-reference type that corresponds with 'page-first' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page search (left corner in this test), and if that does not return a value, a backward sequence search (right corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.</p>
<h2>dp2/marker-reference-page-first-workaround-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-page-first-workaround&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'page-first' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page search (left corner in this test), and if that does not return a value, a backward sequence search (right corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-page-first-workaround-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-page-first-workaround&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'page-first' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page search (left corner in this test), and if that does not return a value, a backward sequence search (right corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠑⠀⠀⠀⠀⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠋⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-page-forward-backward-input.obfl">marker-reference-page-forward-backward<a href="#dp2/marker-reference-page-forward-backward-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker-reference with scope page. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.</p>
<h2>dp2/marker-reference-page-forward-backward-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-page-forward-backward&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker-reference with scope page. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="page"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-page-forward-backward-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-page-forward-backward&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker-reference with scope page. Tested with both forward and backward direction. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠑⠀⠀⠀⠀⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠋⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-page-start-workaround-input.obfl">marker-reference-page-start-workaround<a href="#dp2/marker-reference-page-start-workaround-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests (hypothetical) marker-reference type that corresponds with 'page-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' (rendered top left corner), and if that does not return a value, a backward sequence search for the marker 'foo' (top right corner). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. In addition, tests marker-reference with scope page-content and direction backward, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).</p>
<h2>dp2/marker-reference-page-start-workaround-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-page-start-workaround&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'page-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' (rendered top left corner), and if that does not return a value, a backward sequence search for the marker 'foo' (top right corner). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. In addition, tests marker-reference with scope page-content and direction backward, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="6" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value=""/&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo/prev" value="1"/&gt;
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo/prev" value="3"/&gt;
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo/prev" value="3"/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value="4"/&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo/prev" value="5"/&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-page-start-workaround-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-page-start-workaround&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'page-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' (rendered top left corner), and if that does not return a value, a backward sequence search for the marker 'foo' (top right corner). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. In addition, tests marker-reference with scope page-content and direction backward, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-sequence-backward-input.obfl">marker-reference-sequence-backward<a href="#dp2/marker-reference-sequence-backward-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker-reference with scope sequence and direction backward. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.</p>
<h2>dp2/marker-reference-sequence-backward-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-sequence-backward&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker-reference with scope sequence and direction backward. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="1"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-sequence-backward-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-sequence-backward&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker-reference with scope sequence and direction backward. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠑⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠋⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-spread-across-sequence-input.obfl">marker-reference-spread-across-sequence<a href="#dp2/marker-reference-spread-across-sequence-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that marker-reference with scope spread searches beyond sequence boundaries, i.e. a search on the first page of a new sequence includes assignments made on the last page of the previous sequence if that last page is a left-hand page. Broken: see https://github.com/joeha480/dotify/issues/143.</p>
<h2>dp2/marker-reference-spread-across-sequence-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-spread-across-sequence&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that marker-reference with scope spread searches beyond sequence boundaries, i.e. a search on the first page of a new sequence includes assignments made on the last page of the previous sequence if that last page is a left-hand page. Broken: see https://github.com/joeha480/dotify/issues/143.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="1"/&gt;
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;​
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠁⠁⠁⠁⠁
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-spread-across-sequence-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-spread-across-sequence&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that marker-reference with scope spread searches beyond sequence boundaries, i.e. a search on the first page of a new sequence includes assignments made on the last page of the previous sequence if that last page is a left-hand page. Broken: see https://github.com/joeha480/dotify/issues/143.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠃⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-spread-across-volume-input.obfl">marker-reference-spread-across-volume<a href="#dp2/marker-reference-spread-across-volume-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that marker-reference with scope spread does not search beyond volume boundaries.</p>
<h2>dp2/marker-reference-spread-across-volume-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-spread-across-volume&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that marker-reference with scope spread does not search beyond volume boundaries.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="2"/&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="1"/&gt;
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;​
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠁⠁⠁⠁⠁
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-spread-across-volume-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-spread-across-volume&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that marker-reference with scope spread does not search beyond volume boundaries.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-spread-start-workaround-input.obfl">marker-reference-spread-start-workaround<a href="#dp2/marker-reference-spread-start-workaround-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests (hypothetical) marker-reference type that corresponds with 'spread-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' starting on the left page (rendered left-aligned on the first header line), and if that does not return a value, a backward sequence search for the marker 'foo' also starting on the left page (right-aligned on first header line). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. This workaround is problematic for the first page of the document (see https://github.com/joeha480/dotify/issues/144). A better workaround would be to do a forward spread-content search for 'foo/prev' starting on the left page (left-aligned on the second header line), and if that does not return a value, a backward sequence search for the marker 'foo' starting on the right page (right-aligned on the second header line). Unfortunately scope 'spread-content' is not available. In this test I use 'spread' instead. In addition, tests marker-reference with scope spread-content and direction backward, starting on the right page, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Because 'spread-content' is not available I use 'spread' in this test. Everything tested on both left- and right-hand pages. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).</p>
<h2>dp2/marker-reference-spread-start-workaround-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-spread-start-workaround&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'spread-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' starting on the left page (rendered left-aligned on the first header line), and if that does not return a value, a backward sequence search for the marker 'foo' also starting on the left page (right-aligned on first header line). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. This workaround is problematic for the first page of the document (see https://github.com/joeha480/dotify/issues/144). A better workaround would be to do a forward spread-content search for 'foo/prev' starting on the left page (left-aligned on the second header line), and if that does not return a value, a backward sequence search for the marker 'foo' starting on the right page (right-aligned on the second header line). Unfortunately scope 'spread-content' is not available. In this test I use 'spread' instead. In addition, tests marker-reference with scope spread-content and direction backward, starting on the right page, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Because 'spread-content' is not available I use 'spread' in this test. Everything tested on both left- and right-hand pages. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="7" duplex="true" page-number-variable="page"&gt;
    &lt;template use-when="(= (% $page 2) 1)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="page-content" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence" start-offset="-1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="spread" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;template use-when="(= (% $page 2) 0)"&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="page-content"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo/prev" direction="forward" scope="spread"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="sequence" start-offset="1"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="backward" scope="spread" start-offset="1"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/template&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value=""/&gt;
      &lt;marker class="foo" value="0"/&gt;⠁⠁⠁⠁⠁
                
      &lt;marker class="foo/prev" value="0"/&gt;
      &lt;marker class="foo" value="1"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
                ⠁⠁⠁⠁⠁
                
      &lt;marker class="foo/prev" value="1"/&gt;
      &lt;marker class="foo" value="2"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ​
      &lt;marker class="foo/prev" value="3"/&gt;
      &lt;marker class="foo" value="3"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                
      &lt;br/&gt;
      &lt;marker class="foo/prev" value="3"/&gt;
      &lt;marker class="foo" value="4"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo/prev" value="4"/&gt;
      &lt;marker class="foo" value="5"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;marker class="foo/prev" value="5"/&gt;
      &lt;marker class="foo" value="6"/&gt;⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-spread-start-workaround-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-spread-start-workaround&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests (hypothetical) marker-reference type that corresponds with 'spread-start' in CSS. This type is not yet directly supported in OBFL. As a workaround I do a forward page-content search for the marker 'foo/prev' starting on the left page (rendered left-aligned on the first header line), and if that does not return a value, a backward sequence search for the marker 'foo' also starting on the left page (right-aligned on first header line). At any position in the OBFL the value of the preceding marker of class 'foo' matches the value of the following marker of class 'foo/prev'. This workaround is problematic for the first page of the document (see https://github.com/joeha480/dotify/issues/144). A better workaround would be to do a forward spread-content search for 'foo/prev' starting on the left page (left-aligned on the second header line), and if that does not return a value, a backward sequence search for the marker 'foo' starting on the right page (right-aligned on the second header line). Unfortunately scope 'spread-content' is not available. In this test I use 'spread' instead. In addition, tests marker-reference with scope spread-content and direction backward, starting on the right page, which corresponds with 'page-last-except-start' in CSS (bottom left corner). Because 'spread-content' is not available I use 'spread' in this test. Everything tested on both left- and right-hand pages. Tested with markers at the beginning of the sequence, in the middle of a page, at a soft page break within a block, at a soft page break between two blocks, and at a hard page break. Broken: behavior of page-content changed in Dotify 2.0.0 (see https://github.com/joeha480/dotify/issues/150).&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="7" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠼⠚⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠼⠑⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠑⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/marker-reference-start-offset-first-page-input.obfl">marker-reference-start-offset-first-page<a href="#dp2/marker-reference-start-offset-first-page-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests marker-reference with scope page and start-offset -1 on first page of document. Expected is that the search does not return anything. See https://github.com/joeha480/dotify/issues/144.</p>
<h2>dp2/marker-reference-start-offset-first-page-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;marker-reference-start-offset-first-page&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests marker-reference with scope page and start-offset -1 on first page of document. Expected is that the search does not return anything. See https://github.com/joeha480/dotify/issues/144.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;marker-reference marker="foo" direction="forward" scope="page" start-offset="-1"/&gt;
        &lt;/field&gt;
        &lt;field/&gt;
        &lt;field/&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠁⠁⠁⠁⠁
                
      &lt;marker class="foo" value="1"/&gt;
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
                ⠁⠁⠁⠁⠁
              
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/marker-reference-start-offset-first-page-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;marker-reference-start-offset-first-page&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests marker-reference with scope page and start-offset -1 on first page of document. Expected is that the search does not return anything. See https://github.com/joeha480/dotify/issues/144.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/multi-line-footer-empty-input.obfl">multi-line-footer-empty<a href="#dp2/multi-line-footer-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating empty two-line bottom page margin using multiple footers.</p>
<h2>dp2/multi-line-footer-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;multi-line-footer-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating empty two-line bottom page margin using multiple footers.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/multi-line-footer-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;multi-line-footer-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating empty two-line bottom page margin using multiple footers.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/multi-line-footer-input.obfl">multi-line-footer<a href="#dp2/multi-line-footer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests multi-line footer.</p>
<h2>dp2/multi-line-footer-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;multi-line-footer&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests multi-line footer.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/multi-line-footer-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;multi-line-footer&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests multi-line footer.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/multi-line-footer-partly-empty-input.obfl">multi-line-footer-partly-empty<a href="#dp2/multi-line-footer-partly-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating single-line footer within two-line bottom page margin using multiple footers.</p>
<h2>dp2/multi-line-footer-partly-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;multi-line-footer-partly-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating single-line footer within two-line bottom page margin using multiple footers.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/multi-line-footer-partly-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;multi-line-footer-partly-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating single-line footer within two-line bottom page margin using multiple footers.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/multi-line-header-empty-input.obfl">multi-line-header-empty<a href="#dp2/multi-line-header-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating empty two-line top page margin using multiple headers.</p>
<h2>dp2/multi-line-header-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;multi-line-header-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating empty two-line top page margin using multiple headers.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/multi-line-header-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;multi-line-header-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating empty two-line top page margin using multiple headers.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/multi-line-header-partly-empty-input.obfl">multi-line-header-partly-empty<a href="#dp2/multi-line-header-partly-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating single-line header within two-line top page margin using multiple headers.</p>
<h2>dp2/multi-line-header-partly-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;multi-line-header-partly-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating single-line header within two-line top page margin using multiple headers.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/multi-line-header-partly-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;multi-line-header-partly-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating single-line header within two-line top page margin using multiple headers.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/nested-blocks-with-borders-input.obfl">nested-blocks-with-borders<a href="#dp2/nested-blocks-with-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests nested blocks with borders and margins.</p>
<h2>dp2/nested-blocks-with-borders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;nested-blocks-with-borders&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests nested blocks with borders and margins.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block margin-left="1" margin-right="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
      &lt;block margin-left="2" margin-right="2" margin-top="1" margin-bottom="1" border-left-style="solid" border-left-align="outer" border-right-style="solid" border-right-align="outer" border-top-style="solid" border-top-align="inner" border-bottom-style="solid" border-bottom-align="inner"&gt;
        &lt;block margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" align="center"&gt;⠿⠿⠿⠿
                  &lt;/block&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/nested-blocks-with-borders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;nested-blocks-with-borders&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests nested blocks with borders and margins.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="10" cols="20" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠿⠿⠿⠿⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/orphans-widows-counting-and-borders-input.obfl">orphans-widows-counting-and-borders<a href="#dp2/orphans-widows-counting-and-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that counting of orphan and widow lines does not include borders.</p>
<h2>dp2/orphans-widows-counting-and-borders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;orphans-widows-counting-and-borders&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that counting of orphan and widow lines does not include borders.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2" border-top-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/orphans-widows-counting-and-borders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;orphans-widows-counting-and-borders&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests that counting of orphan and widow lines does not include borders.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-breaking-and-borders-input.obfl">page-breaking-and-borders<a href="#dp2/page-breaking-and-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests borders in combination with page break control. Tests two blocks following each other in various situations: with or without keep="all" on the first block, with or without a bottom border on the first block, and with keep="all", orphans or widows on the second block.</p>
<h2>dp2/page-breaking-and-borders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-breaking-and-borders&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests borders in combination with page break control. Tests two blocks following each other in various situations: with or without keep="all" on the first block, with or without a bottom border on the first block, and with keep="all", orphans or widows on the second block.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="master" duplex="true" page-number-variable="page" page-width="10" page-height="6"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block orphans="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="master"&gt;
    &lt;block keep="all" border-bottom-style="solid"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
    &lt;block widows="2"&gt;⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
                ⠿⠿⠿⠿⠿⠿
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-breaking-and-borders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-breaking-and-borders&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests borders in combination with page break control. Tests two blocks following each other in various situations: with or without keep="all" on the first block, with or without a bottom border on the first block, and with keep="all", orphans or widows on the second block.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-number-backward-reference-input.obfl">page-number-backward-reference<a href="#dp2/page-number-backward-reference-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests page-number referencing a previous block.</p>
<h2>dp2/page-number-backward-reference-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-number-backward-reference&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests page-number referencing a previous block.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;current-page number-format="default"/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;block&gt;⠿⠿⠿
              &lt;/block&gt;
      &lt;block id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
      &lt;block&gt;⠿⠿⠿
              &lt;/block&gt;
      &lt;block id="y"&gt;⠤⠤⠤
              &lt;/block&gt;
      &lt;block id="z"&gt;⠤⠤⠤
              &lt;/block&gt;
    &lt;/block&gt;
    &lt;block break-before="page"&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;page-number ref-id="x" number-format="default"/&gt;
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;page-number ref-id="y" number-format="default"/&gt;
      &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤
                
        &lt;page-number ref-id="z" number-format="default"/&gt;
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-number-backward-reference-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-number-backward-reference&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests page-number referencing a previous block.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠼⠁&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠼⠃&lt;/row&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠼⠉&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-number-follows-leader-input.obfl">page-number-follows-leader<a href="#dp2/page-number-follows-leader-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests leader followed by page-number. Broken: see https://github.com/braillespecs/obfl/issues/31.</p>
<h2>dp2/page-number-follows-leader-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-number-follows-leader&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests leader followed by page-number. Broken: see https://github.com/braillespecs/obfl/issues/31.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block id="chapter_1"&gt;⠤&lt;/block&gt;
    &lt;block&gt;
      &lt;leader pattern="⠄" position="100%" align="right"/&gt;⠀
      &lt;page-number ref-id="chapter_1" number-format="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-number-follows-leader-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-number-follows-leader&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests leader followed by page-number. Broken: see https://github.com/braillespecs/obfl/issues/31.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤&lt;/row&gt;
          &lt;row&gt;⠄⠄⠄⠄⠄⠄⠄⠀⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-number-input.obfl">page-number<a href="#dp2/page-number-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple page-number.</p>
<h2>dp2/page-number-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-number&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple page-number.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="x" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block break-before="page" id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-number-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-number&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple page-number.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-number-reference-other-sequence-input.obfl">page-number-reference-other-sequence<a href="#dp2/page-number-reference-other-sequence-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests page-number in one sequence referencing a block in another sequence. Broken: see https://github.com/joeha480/dotify/issues/97.</p>
<h2>dp2/page-number-reference-other-sequence-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-number-reference-other-sequence&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests page-number in one sequence referencing a block in another sequence. Broken: see https://github.com/joeha480/dotify/issues/97.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="40" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="x" number-format="default"/&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence&gt;
    &lt;block id="x"&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-number-reference-other-sequence-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-number-reference-other-sequence&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests page-number in one sequence referencing a block in another sequence. Broken: see https://github.com/joeha480/dotify/issues/97.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠃&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/page-number-reference-span-input.obfl">page-number-reference-span<a href="#dp2/page-number-reference-span-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests page-number reference to span. Broken: "Failed to complete volume division": is this a bug?</p>
<h2>dp2/page-number-reference-span-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;page-number-reference-span&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests page-number reference to span. Broken: "Failed to complete volume division": is this a bug?&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="8" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
      &lt;page-number ref-id="foo" number-format="default"/&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤
              
      &lt;span id="foo"&gt;
                ⠿
              &lt;/span&gt;
    &lt;/block&gt;
    &lt;block&gt;⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/page-number-reference-span-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;page-number-reference-span&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests page-number reference to span. Broken: "Failed to complete volume division": is this a bug?&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="8" cols="14" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/pre-and-post-content-input.obfl">pre-and-post-content<a href="#dp2/pre-and-post-content-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests single volume with pre-content and post-content.</p>
<h2>dp2/pre-and-post-content-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;pre-and-post-content&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests single volume with pre-content and post-content.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="25"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="1000"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠤⠤⠤⠤⠤⠤
                  &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
    &lt;post-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠤⠤⠤⠤⠤⠤
                  &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/post-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/pre-and-post-content-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;pre-and-post-content&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests single volume with pre-content and post-content.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="25" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/pre-content-input.obfl">pre-content<a href="#dp2/pre-content-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests pre-content.</p>
<h2>dp2/pre-content-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;pre-content&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests pre-content.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="1000"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="main"&gt;
        &lt;block&gt;⠿⠿⠿
                &lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤ ⠤⠤⠤ ⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/pre-content-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;pre-content&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests pre-content.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/pre-content-use-when-input.obfl">pre-content-use-when<a href="#dp2/pre-content-use-when-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests two volume-templates with different pre-content.</p>
<h2>dp2/pre-content-use-when-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;pre-content-use-when&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests two volume-templates with different pre-content.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="false" page-width="10" page-height="5"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template use-when="(= $volume 1)" sheets-in-volume-max="3"/&gt;
  &lt;volume-template use-when="(&gt; $volume 1)" sheets-in-volume-max="3"&gt;
    &lt;pre-content&gt;
      &lt;sequence master="a"&gt;
        &lt;block&gt;⠿⠿⠿⠿&lt;/block&gt;
      &lt;/sequence&gt;
    &lt;/pre-content&gt;
  &lt;/volume-template&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
                ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤ ⠤⠤⠤⠤
              &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/pre-content-use-when-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;pre-content-use-when&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests two volume-templates with different pre-content.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume cols="10" rows="5" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/pre-hyphenation-input.obfl">pre-hyphenation<a href="#dp2/pre-hyphenation-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests (pre-)hyphenation.</p>
<h2>dp2/pre-hyphenation-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;pre-hyphenation&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests (pre-)hyphenation.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="12" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿ ⠿⠿⠿&shy;⠿⠿⠿ ⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/pre-hyphenation-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;pre-hyphenation&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests (pre-)hyphenation.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="5" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/row-spacing-and-collapsing-margins-input.obfl">row-spacing-and-collapsing-margins<a href="#dp2/row-spacing-and-collapsing-margins-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests combinations of row-spacing and collapsing top/bottom margins, including on nested blocks with different row-spacing.</p>
<h2>dp2/row-spacing-and-collapsing-margins-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;row-spacing-and-collapsing-margins&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests combinations of row-spacing and collapsing top/bottom margins, including on nested blocks with different row-spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="true" page-width="40" page-height="35"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block margin-top="1" row-spacing="1.0"&gt;
      &lt;block margin-top="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/row-spacing-and-collapsing-margins-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;row-spacing-and-collapsing-margins&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests combinations of row-spacing and collapsing top/bottom margins, including on nested blocks with different row-spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="35" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/row-spacing-and-margins-input.obfl">row-spacing-and-margins<a href="#dp2/row-spacing-and-margins-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests combinations of row-spacing and (non-collapsed) top/bottom margins, including on nested blocks with different row-spacing.</p>
<h2>dp2/row-spacing-and-margins-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;row-spacing-and-margins&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests combinations of row-spacing and (non-collapsed) top/bottom margins, including on nested blocks with different row-spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" duplex="true" page-width="40" page-height="75"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block margin-top="1" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="0" margin-bottom="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="0" margin-bottom="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="1" margin-bottom="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
      &lt;br/&gt;
                ⠁
              
    &lt;/block&gt;
    &lt;block&gt;⠒⠒⠒&lt;/block&gt;
    &lt;block margin-top="1" row-spacing="1.0"&gt;
      &lt;block margin-top="0" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
      &lt;block&gt;⠒⠒⠒&lt;/block&gt;
      &lt;block margin-top="1" row-spacing="2.0"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
        &lt;br/&gt;
                  ⠁
                
      &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/row-spacing-and-margins-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;row-spacing-and-margins&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests combinations of row-spacing and (non-collapsed) top/bottom margins, including on nested blocks with different row-spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="75" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="0"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒&lt;/row&gt;
          &lt;row rowgap="4"/&gt;
          &lt;row rowgap="4"&gt;⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row rowgap="4"&gt;⠁&lt;/row&gt;
          &lt;row&gt;⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/row-spacing-nested-blocks-input.obfl">row-spacing-nested-blocks<a href="#dp2/row-spacing-nested-blocks-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests row-spacing on block nested in block with border bottom and default row-spacing.</p>
<h2>dp2/row-spacing-nested-blocks-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;row-spacing-nested-blocks&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests row-spacing on block nested in block with border bottom and default row-spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block border-bottom-style="solid" border-bottom-align="center"&gt;
      &lt;block row-spacing="2.0"&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
    &lt;/block&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/row-spacing-nested-blocks-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;row-spacing-nested-blocks&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests row-spacing on block nested in block with border bottom and default row-spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="40" rows="25" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row rowgap="4"&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/sheets-in-volume-max-input.obfl">sheets-in-volume-max<a href="#dp2/sheets-in-volume-max-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests sheets-in-volume-max.</p>
<h2>dp2/sheets-in-volume-max-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;sheets-in-volume-max&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests sheets-in-volume-max.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template sheets-in-volume-max="3"/&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/sheets-in-volume-max-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;sheets-in-volume-max&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests sheets-in-volume-max.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/simple-table-input.obfl">simple-table<a href="#dp2/simple-table-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple table with no cell wrapping. The table takes up the space it needs to display the table data.</p>
<h2>dp2/simple-table-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;simple-table&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple table with no cell wrapping. The table takes up the space it needs to display the table data.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table preferred-empty-space="0"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/simple-table-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;simple-table&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple table with no cell wrapping. The table takes up the space it needs to display the table data.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠿⠿⠿⠿⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠤⠤⠤⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠿⠿⠀⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/single-line-footer-empty-input.obfl">single-line-footer-empty<a href="#dp2/single-line-footer-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating empty bottom page margin using footer.</p>
<h2>dp2/single-line-footer-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;single-line-footer-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating empty bottom page margin using footer.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/single-line-footer-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;single-line-footer-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating empty bottom page margin using footer.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/single-line-footer-input.obfl">single-line-footer<a href="#dp2/single-line-footer-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple single-line footer.</p>
<h2>dp2/single-line-footer-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;single-line-footer&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple single-line footer.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/footer&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
    &lt;block&gt;⠿ &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/single-line-footer-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;single-line-footer&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple single-line footer.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="15" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row&gt;⠿&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/single-line-header-empty-input.obfl">single-line-header-empty<a href="#dp2/single-line-header-empty-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests creating empty single-line top page margin using header.</p>
<h2>dp2/single-line-header-empty-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;single-line-header-empty&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests creating empty single-line top page margin using header.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/single-line-header-empty-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;single-line-header-empty&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests creating empty single-line top page margin using header.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/single-line-header-input.obfl">single-line-header<a href="#dp2/single-line-header-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple single-line header.</p>
<h2>dp2/single-line-header-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;single-line-header&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple single-line header.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="40" page-height="25" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;string value="⠆"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value=""/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠿⠿⠿⠿⠿⠿⠿⠿ ⠿⠿⠿⠿⠿⠿⠿⠿
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/single-line-header-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;single-line-header&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple single-line header.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="25" cols="40" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-auto-column-width-cell-wrapping-input.obfl">table-auto-column-width-cell-wrapping<a href="#dp2/table-auto-column-width-cell-wrapping-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests table with data that can wrap multiple lines in a cell. The column widths are computed so that the total table width is equal to the specified width and the table height is minimized. Cells in the first row have a bottom border to indicate the column widths and spacing.</p>
<h2>dp2/table-auto-column-width-cell-wrapping-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-auto-column-width-cell-wrapping&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests table with data that can wrap multiple lines in a cell. The column widths are computed so that the total table width is equal to the specified width and the table height is minimized. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿⠿ ⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿ ⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿ ⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-auto-column-width-cell-wrapping-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-auto-column-width-cell-wrapping&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests table with data that can wrap multiple lines in a cell. The column widths are computed so that the total table width is equal to the specified width and the table height is minimized. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠀⠀⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠿⠿⠿⠀⠀⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠀⠀⠀⠀⠀⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-auto-column-width-input.obfl">table-auto-column-width<a href="#dp2/table-auto-column-width-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width and the spacing between cell data is optimal. Cells in the first row have a bottom border to indicate the column widths and spacing.</p>
<h2>dp2/table-auto-column-width-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-auto-column-width&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width and the spacing between cell data is optimal. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-auto-column-width-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-auto-column-width&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width and the spacing between cell data is optimal. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-col-spacing-input.obfl">table-col-spacing<a href="#dp2/table-col-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing.</p>
<h2>dp2/table-col-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-col-spacing&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1" preferred-empty-space="0"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-col-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-col-spacing&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠀⠿⠿⠿⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠀⠀⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-colspan-fill-input.obfl">table-colspan-fill<a href="#dp2/table-colspan-fill-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a table cell spanning multiple columns. The cell text is centered and the remaining space in the cell filled with a pattern.</p>
<h2>dp2/table-colspan-fill-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-colspan-fill&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a table cell spanning multiple columns. The cell text is centered and the remaining space in the cell filled with a pattern.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td col-span="4"&gt;
                  ⠸
          &lt;leader pattern="⠒" position="50%" align="center"/&gt;
                  ⠿⠿⠿⠿⠿
                  
          &lt;leader pattern="⠒" position="50%" align="center"/&gt;⠇
                
        &lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-colspan-fill-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-colspan-fill&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests a table cell spanning multiple columns. The cell text is centered and the remaining space in the cell filled with a pattern.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠀⠸⠒⠒⠒⠀⠿⠿⠿⠿⠿⠀⠒⠒⠒⠇&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠀⠿⠿⠿⠀⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠀⠿⠿⠿⠀⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-colspan-input.obfl">table-colspan<a href="#dp2/table-colspan-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests a table cell spanning multiple columns.</p>
<h2>dp2/table-colspan-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-colspan&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests a table cell spanning multiple columns.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1" preferred-empty-space="2"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td col-span="2"&gt;⠿⠿⠿⠿⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-colspan-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-colspan&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests a table cell spanning multiple columns.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠿⠿⠀⠀⠀⠿⠿⠀⠀⠀⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠿⠿⠀⠀⠀⠿⠿⠀⠀⠀⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-fixed-width-input.obfl">table-fixed-width<a href="#dp2/table-fixed-width-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width. All cells have similar content, therefore all columns are equally wide. Cells in the first row have a bottom border to indicate the column widths and spacing.</p>
<h2>dp2/table-fixed-width-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-fixed-width&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width. All cells have similar content, therefore all columns are equally wide. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1" preferred-empty-space="3"&gt;
      &lt;tr&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-fixed-width-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-fixed-width&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The column widths are computed so that the total table width is equal to the specified width. All cells have similar content, therefore all columns are equally wide. Cells in the first row have a bottom border to indicate the column widths and spacing.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒⠒⠀⠒⠒⠒⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿⠀⠀⠀⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-header-repeat-input.obfl">table-header-repeat<a href="#dp2/table-header-repeat-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests repeating of table header rows on each page.</p>
<h2>dp2/table-header-repeat-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-header-repeat&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests repeating of table header rows on each page.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-header-repeat-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-header-repeat&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests repeating of table header rows on each page.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀⠀⠿⠿⠀⠀⠀&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-header-underline-input.obfl">table-header-underline<a href="#dp2/table-header-underline-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing. Cells in the first row have a bottom border.</p>
<h2>dp2/table-header-underline-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-header-underline&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing. Cells in the first row have a bottom border.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1" preferred-empty-space="0"&gt;
      &lt;tr&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-width="1" border-bottom-align="center"&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-header-underline-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-header-underline&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests simple table with no cell wrapping. Column spacing is set to 1. The table takes up the space it needs to display the table data and column spacing. Cells in the first row have a bottom border.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠿⠿⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠒⠒⠒⠒⠀⠒⠒⠒⠒⠀⠒⠒⠒&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠿⠀⠿⠿⠿⠀⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠿⠀⠀⠿⠿⠀⠀⠀⠿⠿⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/table-leaders-input.obfl">table-leaders<a href="#dp2/table-leaders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests leaders within table cells.</p>
<h2>dp2/table-leaders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;table-leaders&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests leaders within table cells.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="20" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="main"&gt;
    &lt;table table-col-spacing="1" preferred-empty-space="0"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
        &lt;td&gt;⠿⠿⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿⠿ 
          &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;/td&gt;
        &lt;td&gt;⠿⠿⠿ 
          &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;/td&gt;
        &lt;td&gt;⠿⠿⠿&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠿ 
          &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;/td&gt;
        &lt;td&gt;⠿ 
          &lt;leader pattern="⠄" position="100%" align="right"/&gt;
        &lt;/td&gt;
        &lt;td&gt;⠿&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/table-leaders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;table-leaders&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests leaders within table cells.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="20" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿⠀⠿⠿⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠿⠀⠄⠄⠀⠿⠿⠿⠀⠄⠀⠿⠿⠿&lt;/row&gt;
          &lt;row&gt;⠿⠀⠄⠄⠄⠀⠿⠀⠄⠄⠄⠀⠿&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/various-page-widths-input.obfl">various-page-widths<a href="#dp2/various-page-widths-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests two layout-masters with different page-width.</p>
<h2>dp2/various-page-widths-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;various-page-widths&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests two layout-masters with different page-width.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="30" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;layout-master name="b" page-width="15" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="b"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
  &lt;sequence master="a"&gt;
    &lt;block&gt;⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/various-page-widths-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;various-page-widths&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests two layout-masters with different page-width.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="30" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section cols="15"&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/vertical-position-align-before-input.obfl">vertical-position-align-before<a href="#dp2/vertical-position-align-before-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests vertical-position and vertical-align="before" on a block with two lines separated by a &lt;br/&gt;.</p>
<h2>dp2/vertical-position-align-before-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;vertical-position-align-before&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests vertical-position and vertical-align="before" on a block with two lines separated by a &lt;br/&gt;.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block vertical-align="before" vertical-position="5"&gt;⠤⠤⠤
      &lt;br/&gt;
              ⠤⠤⠤
            
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/vertical-position-align-before-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;vertical-position-align-before&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests vertical-position and vertical-align="before" on a block with two lines separated by a &lt;br/&gt;.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/vertical-position-align-before-nested-blocks-input.obfl">vertical-position-align-before-nested-blocks<a href="#dp2/vertical-position-align-before-nested-blocks-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests vertical-position and vertical-align="before" on a block with two nested blocks of one line each.</p>
<h2>dp2/vertical-position-align-before-nested-blocks-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;vertical-position-align-before-nested-blocks&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests vertical-position and vertical-align="before" on a block with two nested blocks of one line each.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="a" page-width="20" page-height="10" duplex="false"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="a"&gt;
    &lt;block vertical-align="before" vertical-position="5"&gt;
      &lt;block&gt;⠤⠤⠤ &lt;/block&gt;
      &lt;block&gt;⠤⠤⠤ &lt;/block&gt;
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/vertical-position-align-before-nested-blocks-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;vertical-position-align-before-nested-blocks&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests vertical-position and vertical-align="before" on a block with two nested blocks of one line each.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="20" rows="10" rowgap="0" duplex="false"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/volume-template-various-sheets-in-volume-max-input.obfl">volume-template-various-sheets-in-volume-max<a href="#dp2/volume-template-various-sheets-in-volume-max-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests two volume-templates (first and rest) with different sheets-in-volume-max. Broken: "Implementation does not support different target volume size. All volumes must have the same target size." (see https://github.com/joeha480/dotify/issues/102).</p>
<h2>dp2/volume-template-various-sheets-in-volume-max-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;volume-template-various-sheets-in-volume-max&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests two volume-templates (first and rest) with different sheets-in-volume-max. Broken: "Implementation does not support different target volume size. All volumes must have the same target size." (see https://github.com/joeha480/dotify/issues/102).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="main" page-width="10" page-height="5" duplex="true" page-number-variable="page"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;volume-template use-when="(! (= $volume 1))" sheets-in-volume-max="3"/&gt;
  &lt;volume-template use-when="(= $volume 1)" sheets-in-volume-max="2"/&gt;
  &lt;sequence master="main"&gt;
    &lt;block&gt;⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
              ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤ ⠤⠤⠤⠤⠤
            &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/volume-template-various-sheets-in-volume-max-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;volume-template-various-sheets-in-volume-max&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests two volume-templates (first and rest) with different sheets-in-volume-max. Broken: "Implementation does not support different target volume size. All volumes must have the same target size." (see https://github.com/joeha480/dotify/issues/102).&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
    &lt;volume rows="5" cols="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="dp2/white-space-normalization-around-marker-input.obfl">white-space-normalization-around-marker<a href="#dp2/white-space-normalization-around-marker-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests white space normalisation near marker elements. Tests that white space at the beginning of a block or following a br element is stripped, also when it is followed directly by a marker element. Broken: see https://github.com/joeha480/dotify/issues/117. An additional normalisation step in DP2 fixes the issue at the beginning of a blocks, but not following br elements.</p>
<h2>dp2/white-space-normalization-around-marker-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="und" hyphenate="false"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;white-space-normalization-around-marker&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests white space normalisation near marker elements. Tests that white space at the beginning of a block or following a br element is stripped, also when it is followed directly by a marker element. Broken: see https://github.com/joeha480/dotify/issues/117. An additional normalisation step in DP2 fixes the issue at the beginning of a blocks, but not following br elements.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="15" page-height="10" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;block&gt;
        ⠤⠤⠤
        ⠤⠤⠤
        ⠤⠤⠤
      &lt;/block&gt;
    &lt;block&gt;
      &lt;marker class="foo" value="x"/&gt;
        ⠤⠤⠤
        ⠤⠤⠤
        ⠤⠤⠤
      
    &lt;/block&gt;
    &lt;block&gt;
        ⠤⠤⠤
        ⠤⠤⠤
        
      &lt;br/&gt;
        ⠤⠤⠤
      
    &lt;/block&gt;
    &lt;block&gt;
        ⠤⠤⠤
        ⠤⠤⠤
        
      &lt;br/&gt;
      &lt;marker class="foo" value="x"/&gt;
        ⠤⠤⠤
      
    &lt;/block&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>dp2/white-space-normalization-around-marker-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:title&gt;white-space-normalization-around-marker&lt;/dc:title&gt;
      &lt;dc:description&gt;Tests white space normalisation near marker elements. Tests that white space at the beginning of a block or following a br element is stripped, also when it is followed directly by a marker element. Broken: see https://github.com/joeha480/dotify/issues/117. An additional normalisation step in DP2 fixes the issue at the beginning of a blocks, but not following br elements.&lt;/dc:description&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="15" rows="10" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-align-input.obfl">Table align test<a href="#table/tables-align-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that table align works as expected.</p>
<h2>table/tables-align-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Table align test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that table align works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td align="left"&gt;⠤⠤ ⠤⠤⠤&lt;/td&gt;
        &lt;td align="center"&gt;⠤⠤ ⠤⠤⠤&lt;/td&gt;
        &lt;td align="right"&gt;⠤⠤ ⠤⠤⠤&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-align-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠀⠀⠀⠤⠤⠀⠀⠀⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-anchor-input.obfl">Tables anchor test<a href="#table/tables-anchor-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with anchors works as expected.</p>
<h2>table/tables-anchor-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables anchor test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with anchors works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
    &lt;page-area collection="footnotes" max-height="10"/&gt;
  &lt;/layout-master&gt;
  &lt;collection name="footnotes"&gt;
    &lt;item id="note-1"&gt;1&lt;/item&gt;
  &lt;/collection&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5
          &lt;anchor item="note-1"/&gt;
        &lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-anchor-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
          &lt;row/&gt;
          &lt;row/&gt;
          &lt;row&gt;⠼⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-border-input.obfl">Tables with borders test<a href="#table/tables-border-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with borders works as expected.</p>
<h2>table/tables-border-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables with borders test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with borders works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td border-left-style="solid"&gt;2&lt;/td&gt;
        &lt;td border-left-style="solid"&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td border-left-style="solid"&gt;8&lt;/td&gt;
        &lt;td border-left-style="solid"&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-border-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠇⠼⠃⠀⠀⠇⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠼⠑⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠇⠼⠓⠀⠀⠇⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-border2-input.obfl">Tables with borders test<a href="#table/tables-border2-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with borders works as expected.</p>
<h2>table/tables-border2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables with borders test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with borders works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table table-col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td border-bottom-style="solid" border-bottom-align="inner"&gt;1&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-align="inner"&gt;2&lt;/td&gt;
        &lt;td border-bottom-style="solid" border-bottom-align="inner"&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-border2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠼⠃⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠉⠉⠉⠉⠀⠉⠉⠉⠉⠀⠉⠉⠉⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠼⠑⠀⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠀⠼⠓⠀⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-borders-input.obfl">Tables border, margin and padding test<a href="#table/tables-borders-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables can have borders, margins and paddings.</p>
<h2>table/tables-borders-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables border, margin and padding test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables can have borders, margins and paddings.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="18" page-height="12" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table border-style="solid" border-align="outer" margin-left="1" margin-right="1" margin-top="1" margin-bottom="1" padding-left="1" padding-right="1" padding-top="1" padding-bottom="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-borders-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="18" rows="12" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row/&gt;
          &lt;row&gt;⠀⠏⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠉⠹&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠀&lt;/row&gt;
          &lt;row&gt;⠀⠧⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠤⠼&lt;/row&gt;
          &lt;row/&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-col-spacing-input.obfl">Tables test<a href="#table/tables-col-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables works as expected.</p>
<h2>table/tables-col-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="11" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table table-col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
        &lt;td&gt;⠤⠤⠤&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-col-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="11" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠀⠤⠤⠤⠀⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-colspan-input.obfl">Tables with colspan test<a href="#table/tables-colspan-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with colspan works as expected.</p>
<h2>table/tables-colspan-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables with colspan test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with colspan works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table preferred-empty-space="12"&gt;
      &lt;tr&gt;
        &lt;td col-span="2"&gt;1&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td col-span="2"&gt;5&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td col-span="3"&gt;7&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-colspan-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠀⠀⠼⠑&lt;/row&gt;
          &lt;row&gt;⠼⠛&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-input.obfl">Tables test<a href="#table/tables-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables works as expected.</p>
<h2>table/tables-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-keep-row-input.obfl">Tables test<a href="#table/tables-keep-row-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables works as expected.</p>
<h2>table/tables-keep-row-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="3" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤⠤⠤⠤
          &lt;br/&gt;⠤⠤⠤⠤
        &lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-keep-row-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="3" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
        &lt;/page&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠼⠓⠀⠀⠼⠊&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-leader-input.obfl">Table with leader test<a href="#table/tables-leader-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with leaders works as expected. The leader doesn't interfere with 
		preferred-empty-space (which would be zero if included).</p>
<h2>table/tables-leader-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Table with leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with leaders works as expected. The leader doesn't interfere with 
		preferred-empty-space (which would be zero if included).&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table preferred-empty-space="12"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠁⠁&lt;/td&gt;
        &lt;td&gt;
          &lt;leader position="50%" pattern="⠤" align="center"/&gt;⠁⠁
          &lt;leader position="100%" pattern="⠤" align="right"/&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-leader-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠀⠀⠀⠀⠤⠤⠁⠁⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-leader2-input.obfl">Table with leader test<a href="#table/tables-leader2-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with leaders works as expected.</p>
<h2>table/tables-leader2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Table with leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with leaders works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table preferred-empty-space="0" table-col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠁⠁⠁⠁&lt;/td&gt;
        &lt;td&gt;⠁⠁⠁⠁⠁⠁&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;⠁⠁⠁⠁&lt;/td&gt;
        &lt;td&gt;
          &lt;leader position="50%" pattern="⠤" align="center"/&gt;⠁⠁
          &lt;leader position="100%" pattern="⠤" align="right"/&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-leader2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠀⠁⠁⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠁⠁⠁⠁⠀⠤⠤⠁⠁⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-leader3-input.obfl">Table with leader test<a href="#table/tables-leader3-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with leaders works as expected.</p>
<h2>table/tables-leader3-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Table with leader test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with leaders works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="14" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table preferred-empty-space="0" table-col-spacing="1"&gt;
      &lt;tr&gt;
        &lt;td&gt;⠁⠁⠁⠁⠁⠁&lt;/td&gt;
        &lt;td&gt;⠁⠁⠁⠁&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;
          &lt;leader position="50%" pattern="⠤" align="center"/&gt;⠁⠁
          &lt;leader position="100%" pattern="⠤" align="right"/&gt;
        &lt;/td&gt;
        &lt;td&gt;⠁⠁⠁⠁&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-leader3-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="14" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠁⠁⠁⠁⠁⠁⠀⠁⠁⠁⠁&lt;/row&gt;
          &lt;row&gt;⠤⠤⠁⠁⠤⠤⠀⠁⠁⠁⠁&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-marker-input.obfl">Tables markers test<a href="#table/tables-marker-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with markers works as expected.</p>
<h2>table/tables-marker-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables markers test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with markers works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header&gt;
        &lt;field&gt;
          &lt;marker-reference marker="pagenum" direction="forward" scope="sequence"/&gt;
        &lt;/field&gt;
        &lt;field&gt;
          &lt;string value="⠀"/&gt;
        &lt;/field&gt;
      &lt;/header&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5
          &lt;marker class="pagenum" value="1"/&gt;
        &lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-marker-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀&lt;/row&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-multiline-input.obfl">Tables with multiple row cells test<a href="#table/tables-multiline-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with multiple row cells works as expected.</p>
<h2>table/tables-multiline-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables with multiple row cells test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with multiple row cells works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;⠤​⠤​⠤​⠤​⠤​⠤​⠤​⠤​&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-multiline-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠤⠤⠤⠤⠼⠃⠀⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠤⠤⠤⠤⠀⠀⠀⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠤⠤⠤⠤⠼⠋&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠤⠤⠤⠤&lt;/row&gt;
          &lt;row&gt;⠀⠀⠀⠀⠀⠀⠀⠀⠤⠤⠤⠤&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-row-spacing-input.obfl">Tables test<a href="#table/tables-row-spacing-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables works as expected.</p>
<h2>table/tables-row-spacing-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="12" duplex="true" row-spacing="2.0"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
    &lt;table row-spacing="1.0"&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-row-spacing-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="12" rowgap="4" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
          &lt;row rowgap="0"&gt;⠼⠁⠀⠀⠼⠃⠀⠀⠼⠉&lt;/row&gt;
          &lt;row rowgap="0"&gt;⠼⠙⠀⠀⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row rowgap="0"&gt;⠼⠛⠀⠀⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-rowspan-input.obfl">Tables with colspan test<a href="#table/tables-rowspan-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables with colspan works as expected. Note that multiline cells do not count towards
						preferred-empty-space, that's why the first column is bigger than the second.</p>
<h2>table/tables-rowspan-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables with colspan test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables with colspan works as expected. Note that multiline cells do not count towards
						preferred-empty-space, that's why the first column is bigger than the second.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td row-span="2"&gt;1
          &lt;br/&gt;3
        &lt;/td&gt;
        &lt;td&gt;2&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-rowspan-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠀⠀⠀⠀⠀⠀⠼⠃&lt;/row&gt;
          &lt;row&gt;⠼⠉⠀⠀⠀⠀⠀⠀⠼⠙&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-shrink-input.obfl">Tables test<a href="#table/tables-shrink-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables works as expected.</p>
<h2>table/tables-shrink-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables works as expected.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table preferred-empty-space="0"&gt;
      &lt;tr&gt;
        &lt;td&gt;1&lt;/td&gt;
        &lt;td&gt;123&lt;/td&gt;
        &lt;td&gt;3&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;4&lt;/td&gt;
        &lt;td&gt;5&lt;/td&gt;
        &lt;td&gt;6&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td&gt;7&lt;/td&gt;
        &lt;td&gt;8&lt;/td&gt;
        &lt;td&gt;9&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-shrink-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠁⠼⠁⠃⠉⠼⠉&lt;/row&gt;
          &lt;row&gt;⠼⠙⠼⠑⠀⠀⠼⠋&lt;/row&gt;
          &lt;row&gt;⠼⠛⠼⠓⠀⠀⠼⠊&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
<h1 id="table/tables-shrink2-input.obfl">Tables test<a href="#table/tables-shrink2-input.obfl" class="internal"> &para;</a>
</h1>
<p>Tests that tables can complete layout even if a solution crashes.</p>
<h2>table/tables-shrink2-input.obfl</h2>
<pre class="example">
&lt;obfl version="2011-1" xml:lang="en"&gt;
  &lt;meta&gt;
    &lt;dc:title&gt;Tables test&lt;/dc:title&gt;
    &lt;dc:description&gt;Tests that tables can complete layout even if a solution crashes.&lt;/dc:description&gt;
  &lt;/meta&gt;
  &lt;layout-master name="body" page-width="12" page-height="6" duplex="true"&gt;
    &lt;default-template&gt;
      &lt;header/&gt;
      &lt;footer/&gt;
    &lt;/default-template&gt;
  &lt;/layout-master&gt;
  &lt;sequence master="body"&gt;
    &lt;table&gt;
      &lt;tr&gt;
        &lt;td col-span="1" row-span="1"&gt;1&lt;/td&gt;
        &lt;td col-span="1" row-span="1"&gt;PROBLEM&lt;/td&gt;
        &lt;td col-span="1" row-span="1"&gt;overcome&lt;/td&gt;
        &lt;td col-span="1" row-span="1"&gt;to manage a problem successfully&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/table&gt;
  &lt;/sequence&gt;
&lt;/obfl&gt;</pre>
<h2>table/tables-shrink2-expected.pef</h2>
<pre class="example">
&lt;pef version="2008-1"&gt;
  &lt;head&gt;
    &lt;meta&gt;
      &lt;dc:format&gt;application/x-pef+xml&lt;/dc:format&gt;
      &lt;dc:identifier&gt;identifier?&lt;/dc:identifier&gt;
    &lt;/meta&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;volume cols="12" rows="6" rowgap="0" duplex="true"&gt;
      &lt;section&gt;
        &lt;page&gt;
          &lt;row&gt;⠼⠠⠠⠕⠧⠞⠕⠀⠍⠁⠝⠤&lt;/row&gt;
          &lt;row&gt;⠁⠏⠗⠑⠗⠁⠛⠑⠀⠁&lt;/row&gt;
          &lt;row&gt;⠀⠕⠃⠤⠀⠏⠗⠕⠃⠇⠑⠍&lt;/row&gt;
          &lt;row&gt;⠀⠤⠀⠉⠕⠎⠥⠉⠤&lt;/row&gt;
          &lt;row&gt;⠀⠇⠑⠍⠑⠉⠑⠎⠎⠤&lt;/row&gt;
          &lt;row&gt;⠀⠍⠀⠀⠀⠋⠥⠇⠇⠽&lt;/row&gt;
        &lt;/page&gt;
      &lt;/section&gt;
    &lt;/volume&gt;
  &lt;/body&gt;
&lt;/pef&gt;</pre>
</body>
</html>
